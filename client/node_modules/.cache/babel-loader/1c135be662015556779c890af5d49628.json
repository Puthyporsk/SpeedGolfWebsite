{"ast":null,"code":"import _regeneratorRuntime from\"/Users/puthypor/Desktop/ssplay/bp-ssplay/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/puthypor/Desktop/ssplay/bp-ssplay/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/puthypor/Desktop/ssplay/bp-ssplay/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/puthypor/Desktop/ssplay/bp-ssplay/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/puthypor/Desktop/ssplay/bp-ssplay/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/puthypor/Desktop/ssplay/bp-ssplay/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/puthypor/Desktop/ssplay/bp-ssplay/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import AppMode from'../AppMode';import{Navbar,Container,Row,Col,Card,Button}from\"react-bootstrap\";import{async}from'regenerator-runtime';import PaymentDialog from'./PaymentDialog';var MyAppointments=/*#__PURE__*/function(_React$Component){_inherits(MyAppointments,_React$Component);function MyAppointments(){var _this;_classCallCheck(this,MyAppointments);_this=_possibleConstructorReturn(this,_getPrototypeOf(MyAppointments).call(this));_this.toggleSetMatched=function(s){_this.setState(function(state){return{matched:!state.matched};});};_this.togglePayClicked=function(){_this.setState(function(state){return{payClicked:!state.payClicked};});};_this.handleDeleteAll=function(user,course,d,t,i){_this.handleDelete(user,course,d,t,i);_this.handleDeleteFromDB(user,course,d,t);};_this.handleAllPayment=function(mid,aid,u,c,d,t,p){if(p===\"true\")alert(\"You've already paid!\");else{_this.setState({info:{mmId:mid,userId:aid,username:u,courseName:c,date:d,time:t,paid:p}});_this.togglePayClicked();// this.handlePayment(aid, u, c, d, t, p);\n// this.handleUserPayment(mid, aid, u, c, d, t, p);\n}};_this.handleUserPayment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(mid,aid,u,c,d,t,p){var newData,url,res,msg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newData={userId:aid,username:u,courseName:c,date:d,time:t,paid:\"true\"};url='/appointments/'+_this.props.userObj.id+'/'+mid;_context.next=4;return fetch(url,{headers:{'Accept':'application/json','Content-Type':'application/json'},method:'PUT',body:JSON.stringify(newData)});case 4:res=_context.sent;_context.next=7;return res.text();case 7:msg=_context.sent;console.log(msg);if(res.status===200){alert(\"Paid\");_this.getMyAppointments();}else{_this.props.refreshOnUpdate(AppMode.COURSES_MYAPPT);}case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2,_x3,_x4,_x5,_x6,_x7){return _ref.apply(this,arguments);};}();_this.handlePayment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(aid,u,c,d,t,p){var newData,url,res,msg;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newData={userId:aid,username:u,courseName:c,date:d,time:t,paid:\"true\"};url='/appointments_op/'+u+'/'+c+'/'+d+'/'+t;_context2.next=4;return fetch(url,{headers:{'Accept':'application/json','Content-Type':'application/json'},method:'PUT',body:JSON.stringify(newData)});case 4:res=_context2.sent;_context2.next=7;return res.text();case 7:msg=_context2.sent;console.log(msg);if(res.status===200){alert(\"Paid\");_this.getMyAppointments();}else{_this.props.refreshOnUpdate(AppMode.COURSES_MYAPPT);}case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x8,_x9,_x10,_x11,_x12,_x13){return _ref2.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(u,c,d,t,i){var url,res,msg;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:url='/appointments/'+u+'/'+c+'/'+d+'/'+t+'/'+i;_context3.next=3;return fetch(url,{method:'DELETE'});case 3:res=_context3.sent;_context3.next=6;return res.text();case 6:msg=_context3.sent;console.log(msg);if(res.status==200){console.log(\"APPOINTMENT CANCELLED\");_this.getMyAppointments();}else{alert(msg);}case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x14,_x15,_x16,_x17,_x18){return _ref3.apply(this,arguments);};}();_this.handleDeleteFromDB=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(u,c,d,t){var url,res,msg;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:url='/appointments_op/'+u+'/'+c+'/'+d+'/'+t;_context4.next=3;return fetch(url,{method:'DELETE'});case 3:res=_context4.sent;_context4.next=6;return res.text();case 6:msg=_context4.sent;console.log(msg);if(res.status==200){console.log(\"APPOINTMENT CANCELLED\");_this.getMyAppointments();}else{alert(msg);}case 9:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x19,_x20,_x21,_x22){return _ref4.apply(this,arguments);};}();_this.getMyAppointments=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var url;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:url='/appointments/'+_this.props.userObj.id;fetch(url).then(function(response){if(response.status==200)return response.json();else{throw Error(response.statusText);}}).then(function(obj){console.log(\"GET SUCCESS!\");var thisCourse=JSON.parse(obj);_this.setState({course:thisCourse.map(function(c){return React.createElement(Col,{style:{marginTop:\"20px\",marginBottom:\"50px\"}},React.createElement(Card,{key:c.userId,style:{width:\"30rem\",display:\"flex\"}},React.createElement(Card.Body,null,React.createElement(Button,{style:{float:'right'},onClick:function onClick(){return _this.handleDeleteAll(c.username,c.courseName,c.date,c.time,c.userId);}},\"\\xD7\"),React.createElement(Card.Title,null,\"Appointment for \",c.username),React.createElement(Card.Text,null,\"Location: \",c.courseName),React.createElement(Card.Text,null,\"On: \",c.date),React.createElement(Card.Text,null,\"At: \",c.time),React.createElement(Button,{style:{float:'right'},onClick:function onClick(){return _this.handleAllPayment(c._id,c.userId,c.username,c.courseName,c.date,c.time,c.paid);}},c.paid===\"true\"?\"Paid\":\"Pay\"))));})});}).catch(function(error){console.log(\"GET ERROR!\");});case 2:case\"end\":return _context5.stop();}}},_callee5);}));_this.state={matched:false,payClicked:false};return _this;}// Get information of all courses on render\n_createClass(MyAppointments,[{key:\"componentDidMount\",value:function componentDidMount(){this.getMyAppointments();}},{key:\"render\",value:function render(){return React.createElement(\"div\",{id:\"myAppointmentsPage\"},React.createElement(\"h1\",null),React.createElement(\"table\",null,React.createElement(\"tbody\",null,React.createElement(Container,{fluid:true},React.createElement(Row,{noGutters:true},this.state.course)))),this.state.payClicked?React.createElement(PaymentDialog,{userObj:this.props.userObj,info:this.state.info,toggleSetMatched:this.toggleSetMatched,close:this.togglePayClicked,handleUserPayment:this.handleUserPayment,handlePayment:this.handlePayment}):null);}}]);return MyAppointments;}(React.Component);export default MyAppointments;","map":{"version":3,"sources":["/Users/puthypor/Desktop/ssplay/bp-ssplay/client/src/components/MyAppointments.js"],"names":["React","AppMode","Navbar","Container","Row","Col","Card","Button","async","PaymentDialog","MyAppointments","toggleSetMatched","s","setState","state","matched","togglePayClicked","payClicked","handleDeleteAll","user","course","d","t","i","handleDelete","handleDeleteFromDB","handleAllPayment","mid","aid","u","c","p","alert","info","mmId","userId","username","courseName","date","time","paid","handleUserPayment","newData","url","props","userObj","id","fetch","headers","method","body","JSON","stringify","res","text","msg","console","log","status","getMyAppointments","refreshOnUpdate","COURSES_MYAPPT","handlePayment","then","response","json","Error","statusText","obj","thisCourse","parse","map","marginTop","marginBottom","width","display","float","_id","catch","error","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport AppMode from '../AppMode';\nimport { Navbar, Container, Row, Col, Card, Button } from \"react-bootstrap\";\nimport { async } from 'regenerator-runtime';\nimport PaymentDialog from './PaymentDialog';\n\nclass MyAppointments extends React.Component {\n\n    constructor(){\n        super();\n    \n        this.state={\n            matched: false,\n            payClicked: false\n        };\n    }\n\n    // Get information of all courses on render\n    componentDidMount(){\n        this.getMyAppointments();\n    }\n\n    toggleSetMatched = (s) => {\n        this.setState(state => ({matched: !state.matched}));\n    }\n\n    togglePayClicked = () => {\n        this.setState(state => ({payClicked: !state.payClicked}));\n    }\n\n    handleDeleteAll = (user, course, d, t, i) =>{\n        this.handleDelete(user, course, d, t, i);\n        this.handleDeleteFromDB(user, course, d, t);\n    }\n\n    handleAllPayment = (mid, aid, u, c, d, t, p) => {\n        if (p === \"true\")\n            alert(\"You've already paid!\");\n        else{\n            this.setState({info: {\n                mmId: mid,\n                userId: aid,\n                username: u,\n                courseName: c,\n                date: d,\n                time: t,\n                paid: p\n            }});\n            this.togglePayClicked();\n            // this.handlePayment(aid, u, c, d, t, p);\n            // this.handleUserPayment(mid, aid, u, c, d, t, p);\n        }\n    }   \n\n    handleUserPayment = async (mid, aid, u, c, d, t, p) => {\n        let newData = {\n            userId: aid,\n            username: u,\n            courseName: c,\n            date: d,\n            time: t,\n            paid: \"true\"\n        }\n        const url = '/appointments/'+this.props.userObj.id+'/'+mid;\n        const res = await fetch(url, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n                },\n            method: 'PUT',\n            body: JSON.stringify(newData)}); \n        const msg = await res.text();\n        console.log(msg);\n        if (res.status === 200) {\n            alert(\"Paid\");\n            this.getMyAppointments();\n        } else {\n            this.props.refreshOnUpdate(AppMode.COURSES_MYAPPT);\n        }\n    }\n\n    handlePayment = async(aid, u, c, d, t, p) => {\n        let newData = {\n            userId: aid,\n            username: u,\n            courseName: c,\n            date: d,\n            time: t,\n            paid: \"true\"\n        }\n        const url = '/appointments_op/'+u+'/'\n                                        +c+'/'\n                                        +d+'/'\n                                        +t;\n        const res = await fetch(url, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n                },\n            method: 'PUT',\n            body: JSON.stringify(newData)}); \n        const msg = await res.text();\n        console.log(msg);\n        if (res.status === 200) {\n            alert(\"Paid\");\n            this.getMyAppointments();\n        } else {\n            this.props.refreshOnUpdate(AppMode.COURSES_MYAPPT);\n        }\n    }\n\n    // Delete course with this id from database\n    handleDelete = async (u, c, d, t, i) => {\n        const url = '/appointments/'+u+'/'+c+'/'+d+'/'+t+'/'+i;\n        const res = await fetch(url, {method: 'DELETE'}); \n        const msg = await res.text();\n        console.log(msg);\n        if (res.status == 200) {\n            console.log(\"APPOINTMENT CANCELLED\");\n            this.getMyAppointments();\n        } else {\n            alert(msg);\n        }  \n    }\n\n    handleDeleteFromDB = async(u, c, d, t) => {\n        const url = '/appointments_op/'+u+'/'+c+'/'+d+'/'+t;\n        const res = await fetch(url, {method: 'DELETE'}); \n        const msg = await res.text();\n        console.log(msg);\n        if (res.status == 200) {\n            console.log(\"APPOINTMENT CANCELLED\");\n            this.getMyAppointments();\n        } else {\n            alert(msg);\n        }  \n    }\n\n    // Get information of all courses to show on page\n    getMyAppointments = async () => {\n        const url = '/appointments/'+this.props.userObj.id;\n        fetch(url)\n        .then((response) => {\n            if (response.status == 200)\n                return response.json();\n            else\n            {\n                throw Error(response.statusText);\n            }\n        })\n        .then((obj) => \n        {\n            console.log(\"GET SUCCESS!\");\n            let thisCourse = JSON.parse(obj);\n            this.setState({\n                course: thisCourse.map((c) =>(\n                    <Col  style={{marginTop: \"20px\", marginBottom: \"50px\"}}>\n                        <Card key={c.userId} style={{ width: \"30rem\", display: \"flex\" }}>                      \n                        <Card.Body>\n                            <Button style={{float: 'right'}} onClick={() => this.handleDeleteAll(c.username, c.courseName, c.date, c.time, c.userId)}>&times;</Button>\n                            <Card.Title>Appointment for {c.username}</Card.Title>\n                            <Card.Text>Location: {c.courseName}</Card.Text>\n                            <Card.Text>On: {c.date}</Card.Text>\n                            <Card.Text>At: {c.time}</Card.Text>\n                            <Button style={{float: 'right'}} onClick={() => this.handleAllPayment(c._id, c.userId, c.username, c.courseName, c.date, c.time, c.paid)}>{c.paid === \"true\" ? \"Paid\": \"Pay\"}</Button>\n                        </Card.Body>\n                        </Card>\n                    </Col>\n                ))\n            });\n        }).catch((error) =>{\n            console.log(\"GET ERROR!\");\n        });\n    }\n\n    render() {\n        return(\n            <div id=\"myAppointmentsPage\">\n                <h1></h1>\n                <table >\n                    <tbody>\n                    <Container fluid={true}>\n                        <Row noGutters>                    \n                            {this.state.course}\n                        </Row>\n                    </Container> \n                    </tbody>\n                </table>\n                {this.state.payClicked ? <PaymentDialog userObj={this.props.userObj} info={this.state.info}\n                toggleSetMatched={this.toggleSetMatched} close={this.togglePayClicked}\n                handleUserPayment={this.handleUserPayment} handlePayment={this.handlePayment}></PaymentDialog> :null}\n        </div>\n        );\n    }\n}\n\nexport default MyAppointments;"]},"metadata":{},"sourceType":"module"}